{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/App/App.module.css","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/services/images-api.js","components/Button/Button.jsx","components/Loader/Loader.jsx","components/Modal/Modal.jsx","components/App/App.jsx","index.js"],"names":["module","exports","Searchbar","state","search","handleChange","e","setState","target","value","handleSubmit","preventDefault","props","onSubmit","className","styles","this","SearchForm","type","SearchFormButton","SearchFormButtonLabel","SearchFormInput","autoComplete","autoFocus","placeholder","name","onChange","Component","ImageGalleryItem","image","openModal","tags","onClick","src","alt","ImageGalleryItemImage","ImageGallery","images","map","largeImageURL","webformatURL","API_KEY","fetchImages","query","pageNumber","fetch","then","x","Promise","resolve","setTimeout","res","json","data","hits","Button","Loader","MODAL_ROOT","document","querySelector","Modal","handleKeyPress","code","onClose","handleBackdropClick","currentTarget","window","addEventListener","removeEventListener","children","createPortal","Overlay","role","App","error","isLoading","isModalOpen","largeImageId","largeImage","onSearch","fetchImagesWithScroll","scroll","imagesApi","catch","finally","firstLoadedImage","id","y","getElementById","getBoundingClientRect","top","scrollY","scrollTo","behavior","findPic","find","closeModal","prevProps","prevState","length","defaultProps","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.bce75fe3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__36SL7\",\"SearchForm\":\"Searchbar_SearchForm__1FOWw\",\"SearchFormButton\":\"Searchbar_SearchFormButton__JBAyW\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__2IVZQ\",\"SearchFormInput\":\"Searchbar_SearchFormInput__MZLxd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2E8ek\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__3BA5-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__W_skY\",\"Modal\":\"Modal_Modal__1pprf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__3jQb7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__uHnY7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__YC4fD\"};","import React, { Component } from \"react\";\r\nimport styles from \"./Searchbar.module.css\";\r\n\r\nexport default class Searchbar extends Component {\r\n  state = { search: \"\" };\r\n\r\n  handleChange = (e) => {\r\n    this.setState({ search: e.target.value });\r\n  };\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    this.props.onSubmit(this.state.search);\r\n    this.setState({ search: \"\" });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={styles.Searchbar}>\r\n        <form onSubmit={this.handleSubmit} className={styles.SearchForm}>\r\n          <button type=\"submit\" className={styles.SearchFormButton}>\r\n            <span className={styles.SearchFormButtonLabel}>Search</span>\r\n          </button>\r\n\r\n          <input\r\n            className={styles.SearchFormInput}\r\n            type=\"text\"\r\n            autoComplete=\"off\"\r\n            autoFocus\r\n            placeholder=\"Search images and photos\"\r\n            value={this.state.search}\r\n            name=\"search\"\r\n            onChange={this.handleChange}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport T from 'prop-types';\r\nimport styles from './ImageGalleryItem.module.css';\r\n\r\nconst ImageGalleryItem = ({ image, openModal, tags }) => {\r\n  return (\r\n    <li onClick={openModal} className={styles.ImageGalleryItem}>\r\n      <img src={image} alt={tags} className={styles.ImageGalleryItemImage} />\r\n    </li>\r\n  );\r\n};\r\n\r\nImageGalleryItem.propTypes = {\r\n  image: T.string,\r\n  openModal: T.func,\r\n  tags: T.string,\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import React from 'react';\r\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\r\nimport styles from './ImageGallery.module.css';\r\n\r\n// const ImageGallery = ({ images, openModal }) => {\r\n//   return (\r\n//     <ul className={styles.ImageGallery}>\r\n//       {images.map(image => (\r\n//         <ImageGalleryItem openModal={openModal} key={image.id} image={image} />\r\n//       ))}\r\n//     </ul>\r\n//   );\r\n// };\r\nconst ImageGallery = ({ images, openModal }) => {\r\n  return (\r\n    <ul className={styles.ImageGallery}>\r\n      {images.map(({ tags, largeImageURL, webformatURL }) => (\r\n        <ImageGalleryItem\r\n          openModal={() => openModal(largeImageURL)}\r\n          key={largeImageURL}\r\n          image={webformatURL}\r\n          tags={tags}\r\n        />\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\nexport default ImageGallery;\r\n","// const BASE_URL = \"https://pixabay.com/api\";\r\nconst API_KEY = '24483038-cb7cc094485ab1051031cc5e6';\r\n\r\nexport const fetchImages = (query = '', pageNumber = 1) => {\r\n  return (\r\n    fetch(\r\n      `https://pixabay.com/api/?q=${query}&page=${pageNumber}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n    )\r\n      .then(x => new Promise(resolve => setTimeout(() => resolve(x), 1000)))\r\n      // Задержка добавлена для тестирования Loader\r\n      .then(res => res.json())\r\n      .then(data => data.hits)\r\n  );\r\n};\r\n\r\nexport { fetchImages as default };\r\n","import React from \"react\";\r\nimport styles from \"./Button.module.css\";\r\n\r\nconst Button = ({ fetchImages }) => (\r\n  <button type=\"button\" className={styles.Button} onClick={fetchImages}>\r\n    Load more...\r\n  </button>\r\n);\r\n\r\nexport default Button;\r\n","import React from 'react';\r\n\r\nconst Loader = () => <div>Loading...</div>;\r\n\r\nexport default Loader;\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './Modal.module.css';\r\n\r\nconst MODAL_ROOT = document.querySelector('#modal-root');\r\n\r\nexport default class Modal extends Component {\r\n  static propTypes = {\r\n    onClose: PropTypes.func.isRequired,\r\n    children: PropTypes.node.isRequired,\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleKeyPress);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleKeyPress);\r\n  }\r\n\r\n  handleKeyPress = e => {\r\n    if (e.code !== 'Escape') {\r\n      return;\r\n    }\r\n\r\n    this.props.onClose();\r\n  };\r\n\r\n  handleBackdropClick = e => {\r\n    if (e.target === e.currentTarget) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { children } = this.props;\r\n    return createPortal(\r\n      <div\r\n        className={styles.Overlay}\r\n        onClick={this.handleBackdropClick}\r\n        role=\"presentation\"\r\n      >\r\n        <div className={styles.Modal}>{children}</div>\r\n      </div>,\r\n      MODAL_ROOT,\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport Searchbar from '../Searchbar/Searchbar';\r\nimport ImageGallery from '../ImageGallery/ImageGallery';\r\nimport * as imagesApi from '../services/images-api';\r\nimport Button from '../Button/Button';\r\nimport Loader from '../Loader/Loader';\r\nimport Modal from '../Modal/Modal';\r\nimport styles from '../App/App.module.css';\r\n\r\nexport default class App extends Component {\r\n  static defaultProps = {};\r\n\r\n  static propTypes = {};\r\n\r\n  state = {\r\n    images: [],\r\n    pageNumber: 1,\r\n    search: '',\r\n    error: '',\r\n    isLoading: false,\r\n    isModalOpen: false,\r\n    largeImageId: null,\r\n    largeImage: '',\r\n  };\r\n\r\n  componentDidMount() {}\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.search !== this.state.search) {\r\n      this.fetchImages(false);\r\n    }\r\n  }\r\n\r\n  onSearch = search => {\r\n    this.setState({ search, images: [], pageNumber: 1 });\r\n  };\r\n\r\n  fetchImagesWithScroll = () => {\r\n    this.fetchImages(true);\r\n  };\r\n\r\n  fetchImages = scroll => {\r\n    this.setState({ isLoading: true });\r\n    const { search, pageNumber } = this.state;\r\n    imagesApi\r\n      .fetchImages(search, pageNumber)\r\n      .then(images => {\r\n        this.setState(state => ({\r\n          images: [...state.images, ...images],\r\n          pageNumber: state.pageNumber + 1,\r\n        }));\r\n        return images[0];\r\n      })\r\n      .catch(error => {\r\n        this.setState({ error });\r\n      })\r\n      .finally(() => {\r\n        this.setState({ isLoading: false });\r\n      })\r\n      .then(firstLoadedImage => {\r\n        if (scroll) {\r\n          const { id } = firstLoadedImage;\r\n\r\n          const y =\r\n            document.getElementById(id).getBoundingClientRect().top +\r\n            window.scrollY -\r\n            80;\r\n          window.scrollTo({\r\n            top: y,\r\n            behavior: 'smooth',\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  findPic = () => {\r\n    const largeImg = this.state.images.find(image => {\r\n      return image.id === this.state.largeImageId;\r\n    });\r\n    return largeImg;\r\n  };\r\n\r\n  openModal = largeImageURL => {\r\n    this.setState({\r\n      isModalOpen: true,\r\n      largeImage: largeImageURL,\r\n      // largeImageId: Number(e.currentTarget.id),\r\n    });\r\n  };\r\n  closeModal = () => this.setState({ isModalOpen: false });\r\n\r\n  render() {\r\n    const { isLoading, images, isModalOpen, largeImageId, largeImage } =\r\n      this.state;\r\n\r\n    return (\r\n      <div className={styles.App}>\r\n        <Searchbar onSubmit={this.onSearch} />\r\n        <ImageGallery openModal={this.openModal} images={images} />\r\n        {isLoading && <Loader />}\r\n        {images.length > 0 && (\r\n          <Button fetchImages={this.fetchImagesWithScroll} />\r\n        )}\r\n        {isModalOpen && (\r\n          <Modal largeImageId={largeImageId} onClose={this.closeModal}>\r\n            <img src={largeImage} alt=\"\" />\r\n          </Modal>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}